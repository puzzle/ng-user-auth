0 info it worked if it ends with ok
1 verbose cli [ '/usr/bin/node', '/usr/bin/npm', 'publish' ]
2 info using npm@3.10.10
3 info using node@v6.11.5
4 verbose publish [ '.' ]
5 silly cache add args [ '.', null ]
6 verbose cache add spec .
7 silly cache add parsed spec Result {
7 silly cache add   raw: '.',
7 silly cache add   scope: null,
7 silly cache add   escapedName: null,
7 silly cache add   name: null,
7 silly cache add   rawSpec: '.',
7 silly cache add   spec: '/home/ogugger/projects/ng-user-auth',
7 silly cache add   type: 'directory' }
8 verbose addLocalDirectory /home/ogugger/.npm/ng-user-auth/2.0.5/package.tgz not in flight; packing
9 verbose correctMkdir /home/ogugger/.npm correctMkdir not in flight; initializing
10 info lifecycle ng-user-auth@2.0.5~prepublish: ng-user-auth@2.0.5
11 silly lifecycle ng-user-auth@2.0.5~prepublish: no script for prepublish, continuing
12 verbose tar pack [ '/home/ogugger/.npm/ng-user-auth/2.0.5/package.tgz',
12 verbose tar pack   '/home/ogugger/projects/ng-user-auth' ]
13 verbose tarball /home/ogugger/.npm/ng-user-auth/2.0.5/package.tgz
14 verbose folder /home/ogugger/projects/ng-user-auth
15 verbose addLocalTarball adding from inside cache /home/ogugger/.npm/ng-user-auth/2.0.5/package.tgz
16 verbose correctMkdir /home/ogugger/.npm correctMkdir not in flight; initializing
17 silly cache afterAdd ng-user-auth@2.0.5
18 verbose afterAdd /home/ogugger/.npm/ng-user-auth/2.0.5/package/package.json not in flight; writing
19 verbose correctMkdir /home/ogugger/.npm correctMkdir not in flight; initializing
20 verbose afterAdd /home/ogugger/.npm/ng-user-auth/2.0.5/package/package.json written
21 silly publish { name: 'ng-user-auth',
21 silly publish   version: '2.0.5',
21 silly publish   description: 'User authentication and authorization mdule for AngularJS.',
21 silly publish   main: 'dist/ng-user-auth.min.js',
21 silly publish   module: 'dist/ng-user-auth.node.min.js',
21 silly publish   scripts:
21 silly publish    { build: 'eslint src && rimraf dist && webpack --bail --progress --config config/webpack.common.js',
21 silly publish      server: 'yarn run build && cd sample/server && node server.js',
21 silly publish      test: 'eslint src && karma start config/karma.conf.js',
21 silly publish      'test-watch': 'karma start --auto-watch --no-single-run --browsers Chromium config/karma.conf.js',
21 silly publish      start: 'yarn run server' },
21 silly publish   repository:
21 silly publish    { type: 'git',
21 silly publish      url: 'git+https://github.com/puzzle/ng-user-auth.git' },
21 silly publish   author: { name: 'Puzzle ITC', email: 'info@puzzle.ch' },
21 silly publish   devDependencies:
21 silly publish    { '@puzzleitc/frontend-guides': '^1.0.0',
21 silly publish      '@types/angular': '^1.6.31',
21 silly publish      '@types/angular-mocks': '^1.5.11',
21 silly publish      '@types/angular-ui-router': '^1.1.37',
21 silly publish      '@types/jasmine': '^2.5.53',
21 silly publish      '@types/lodash': '^4.14.74',
21 silly publish      'angular-mocks': '~1.5.11',
21 silly publish      'angular-ui-router': '^0.4.2',
21 silly publish      'babel-core': '^6.26.0',
21 silly publish      'babel-loader': '^7.1.2',
21 silly publish      'babel-preset-es2015': '^6.24.1',
21 silly publish      'body-parser': '^1.15.0',
21 silly publish      eslint: '^4.1.1',
21 silly publish      express: '^4.15.3',
21 silly publish      'file-loader': '^0.11.2',
21 silly publish      'html-loader': '^0.4.5',
21 silly publish      'html-webpack-plugin': '^2.28.0',
21 silly publish      'imports-loader': '^0.7.1',
21 silly publish      'istanbul-instrumenter-loader': '^2.0.0',
21 silly publish      'jasmine-core': '^2.6.4',
21 silly publish      karma: '^1.7.0',
21 silly publish      'karma-babel-preprocessor': '^6.0.1',
21 silly publish      'karma-chrome-launcher': '^2.1.1',
21 silly publish      'karma-coverage': '^1.1.1',
21 silly publish      'karma-jasmine': '^1.1.0',
21 silly publish      'karma-phantomjs-launcher': '^1.0.4',
21 silly publish      'karma-remap-coverage': '^0.1.4',
21 silly publish      'karma-sourcemap-loader': '^0.3.7',
21 silly publish      'karma-spec-reporter': '^0.0.31',
21 silly publish      'karma-webpack': '^2.0.3',
21 silly publish      'ng-annotate-loader': '^0.6.1',
21 silly publish      'node-libs-browser': '^2.0.0',
21 silly publish      'null-loader': '^0.1.1',
21 silly publish      'optimize-js-plugin': '^0.0.4',
21 silly publish      'raw-loader': '^0.5.1',
21 silly publish      rimraf: '^2.6.1',
21 silly publish      'source-map-loader': '^0.2.1',
21 silly publish      'version-updater': '^3.13.0',
21 silly publish      webpack: '^2.2.0',
21 silly publish      'webpack-merge': '^4.1.0' },
21 silly publish   license: 'Apache-2.0',
21 silly publish   bugs: { url: 'https://github.com/puzzle/ng-user-auth/issues' },
21 silly publish   keywords:
21 silly publish    [ 'angular',
21 silly publish      'user',
21 silly publish      'auth',
21 silly publish      'authentication',
21 silly publish      'authorization',
21 silly publish      'interceptor',
21 silly publish      'security',
21 silly publish      'permission' ],
21 silly publish   homepage: 'https://github.com/puzzle/ng-user-auth',
21 silly publish   dependencies:
21 silly publish    { angular: '~1.5.11',
21 silly publish      'angular-local-storage': '^0.2.5',
21 silly publish      jquery: '^3.2.1',
21 silly publish      lodash: '^4.17.4' },
21 silly publish   engines: { node: '>=6.10' },
21 silly publish   readme: '# ng-user-auth\n\n[![Build Status](https://img.shields.io/travis/puzzle/ng-user-auth.svg)](https://travis-ci.org/puzzle/ng-user-auth) [![Code Climate](https://codeclimate.com/github/puzzle/ng-user-auth/badges/gpa.svg)](https://codeclimate.com/github/puzzle/ng-user-auth)\n\nUser authentication and authorization module for AngularJS.\n\n## Features\n\n* Transparently handles authentication and authorization for your token based REST API\n* Authenticates with a backend, stores the token in the local storage of the browser and adds the `Authorization` HTTP header to every request\n* Redirects the user to the login page when the token is no longer valid\n* Expects to get a list of user permissions from the backend that is then used for the client side authorization\n* Integrates with `angular-ui-router` and adds route based authorization\n* Provides a directive that can be used for element based authorization\n\n## Integration into your application\nFollow these steps to add the ng-user-auth module to your application:\n* Clone the repo and add the file `dist/ng-user-auth.min.js` to your HTML header\n* **OR** add NPM package to your application: `npm install --save ng-user-auth`\n* **OR** add yarn package to your application: `yarn add ng-user-auth`\n* Configure the module\n* Add permission based protection to your UI routes or HTML elements\n\n## Configuration\nConfigure the `ngUserAuthServiceProvider` to adjust it to your application\'s needs:\n\n```javascript\nmyApp.config([\'ui.router\', \'ngUserAuthServiceProvider\', function($urlRouterProvider, ngUserAuthServiceProvider) {\n  // backend/server REST URI that will be called to get the authentication and authorization information\n  ngUserAuthServiceProvider.setApiEndpoint(\'/authentication\');\n\n  // client side UI route URL that the user will be redirected to if he is not authenticated\n  ngUserAuthServiceProvider.setUnauthorizedUrl(\'/unauthorized\');\n\n  // request parameter that contains the originally requested path the user wanted to navigate to.\n  // this is appended to the \'unauthorized\' URL\n  ngUserAuthServiceProvider.setRequestedPathParameterName(\'requestedPath\');\n\n  // URLs starting with this prefix will be cancelled if a HTTP status code 401 is returned to prevent multiple\n  // redirects to the \'unauthorized\' URL\n  ngUserAuthServiceProvider.setAbortRequestsUrlPrefix(\'/\');\n\n  // add functions that will be called when the user is logged out\n  ngUserAuthServiceProvider.addLogoutAction(function ($injector) {\n    $injector.get(\'$mdDialog\').hide();\n  });\n\n  // the default permission name that every user needs to have to signal he is logged in\n  ngUserAuthServiceProvider.setDefaultLoggedInPermissionName(\'token_read\');\n  \n  // in case you want to periodically check the validity of the session.\n  // don\'t forget to _NOT_ extend the validity of the token during the check in the backend, otherwise\n  // the session will live forever with this check\n  ngUserAuthServiceProvider.setSessionCheckSettings({\n        enabled: true, // should the check be enabled?\n        checkUrl: \'/sessioncheck\', // endpoint URL for the HTTP GET\n        interval: 30000, // interval in milliseconds\n        onSessionInvalid: function () {} // callback function if session is invalid\n  });\n\n  // in case you need a default/otherwise route, let ngUserAuth handle it by creating a handler function\n  $urlRouterProvider.otherwise(ngUserAuthServiceProvider.getOtherwiseRouteHandler(\'/home\'));\n}]);\n```\n\n## UI route based authorization\nHere are some basic examples. For further details please consult the demo application.\n```javascript\n$stateProvider\n  // every state that does not have the data.anonymousAccessAllowed is protected and the user needs\n  // to be logged in to visit it. if there are no permissions specified, at least the default permission\n  // that can be set with setDefaultLoggedInPermissionName needs to be present\n  .state(\'home\', {\n    url: \'/home\',\n    template: \'<h1>Home</h1>\'\n  })\n\n  // special permission required\n  .state(\'secure\', {\n    url: \'/secure\',\n    template: \'<h1>Secure</h1>\',\n    data: {\n      hasPermission: \'secret_agent\',\n    }\n  })\n\n  // anonymous access needs to be allowed on the login and logout URIs\n  .state(\'login\', {\n    url: \'/login\',\n    template: \'<login></login>\',\n    data: {\n      anonymousAccessAllowed: true\n    }\n  })\n```\n\n## Element/directive based authorization\n```html\n<div ua-permission="admin">\n  <!-- this element is only shown if the user has the permission \'admin\' -->\n</div>\n\n<div ua-permission="[\'admin\', \'staff\']">\n  <!-- this element is only shown if the user has both the permission \'admin\' AND \'staff\'-->\n</div>\n\n<div ua-any-permission="[\'admin\', \'superuser\']">\n  <!-- this element is only shown if the user has any of the permissions \'admin\' OR \'staff\' -->\n</div>\n\n<div ua-lacks-permission="superuser">\n  <!-- this element is only shown if the user does NOT have the permission \'superuser\' -->\n</div>\n```\n\n## Query/show login state\n```javascript\nangular\n  .module(\'ngUserAuthSample\', [\'ngUserAuth\'])\n  .run(sampleRun);\n    \nfunction sampleRun($rootScope, ngUserAuthService, ngUserAuthInfoService) {\n  $rootScope.authService = ngUserAuthService;\n  $rootScope.authInfoService = ngUserAuthInfoService;\n}\n```\n```html\n    <pre>\n      <!-- Here\'s some values to keep an eye on in the sample. -->\n        ngAuthService.getUserToken(): {{authService.getUserToken()}}\n        ngAuthInfoService.isLoggedIn(): {{authInfoService.isLoggedIn()}}\n        ngAuthInfoService.getUser(): {{authInfoService.getUser()}}\n    </pre>\n```\n\n## Running the example application\nIf you want to clone the repo and run the example application please follow these steps:\n\n### Installation\nThis will download all dependencies and tools that are needed to run the demo:\n* npm install\n\n## Run example/demo page\nThis will start a web server on port 3000:\n* npm start\n\n# Changelog\n* v2.0.5 (2017-11-07): Allow custom state resolver to make compatible with ngRoute,\n                       remove dependency to ui-router, upgrade to angular-local-storage 0.2.7\n* v2.0.4 (2017-09-05): Fix toLowerCase problem\n* v2.0.3 (2017-09-05): Fix build\n* v2.0.2 (2017-09-05): Option to ignore case of permission names, watch attributes for changes\n* v2.0.1 (2017-08-29): Fix module bundling issues\n* v2.0.0 (2017-08-28): Use webpack to bundle application, change directive names\n                       to `ua-permission`, `ua-any-permission`, `ua-lacks-permission`\n* v1.1.2 (2017-04-21): Chore: update dependencies, fix Travis build\n* v1.1.1 (2017-04-21): Bugfix: only start session check when already logged in\n* v1.1.0 (2017-04-21): New feature: session check\n* v1.0.7 (2016-10-20): Fixed bug if response config doesn\'t have a timeout\n* v1.0.6 (2016-08-30): Fix logout issue, merge pull request #2\n',
21 silly publish   readmeFilename: 'README.md',
21 silly publish   gitHead: '2b5e28d522b40149fad37413796dfe0f8fea45e1',
21 silly publish   _id: 'ng-user-auth@2.0.5',
21 silly publish   _shasum: 'a4b0979fa44bba8aae426847bf561f414753ad75',
21 silly publish   _from: '.' }
22 verbose getPublishConfig undefined
23 silly mapToRegistry name ng-user-auth
24 silly mapToRegistry using default registry
25 silly mapToRegistry registry https://registry.npmjs.org/
26 silly mapToRegistry data Result {
26 silly mapToRegistry   raw: 'ng-user-auth',
26 silly mapToRegistry   scope: null,
26 silly mapToRegistry   escapedName: 'ng-user-auth',
26 silly mapToRegistry   name: 'ng-user-auth',
26 silly mapToRegistry   rawSpec: '',
26 silly mapToRegistry   spec: 'latest',
26 silly mapToRegistry   type: 'tag' }
27 silly mapToRegistry uri https://registry.npmjs.org/ng-user-auth
28 verbose publish registryBase https://registry.npmjs.org/
29 silly publish uploading /home/ogugger/.npm/ng-user-auth/2.0.5/package.tgz
30 verbose request uri https://registry.npmjs.org/ng-user-auth
31 verbose request sending authorization for write operation
32 info attempt registry request try #1 at 10:51:24 AM
33 verbose request using bearer token for auth
34 verbose request id c3c508584872b30f
35 http request PUT https://registry.npmjs.org/ng-user-auth
36 http 403 https://registry.npmjs.org/ng-user-auth
37 verbose headers { 'content-type': 'application/json',
37 verbose headers   'cache-control': 'max-age=300',
37 verbose headers   'content-length': '91',
37 verbose headers   'accept-ranges': 'bytes',
37 verbose headers   date: 'Tue, 07 Nov 2017 09:51:25 GMT',
37 verbose headers   via: '1.1 varnish',
37 verbose headers   connection: 'keep-alive',
37 verbose headers   'x-served-by': 'cache-hhn1522-HHN',
37 verbose headers   'x-cache': 'MISS',
37 verbose headers   'x-cache-hits': '0',
37 verbose headers   'x-timer': 'S1510048284.227495,VS0,VE1300',
37 verbose headers   vary: 'Accept-Encoding, Accept' }
38 verbose request invalidating /home/ogugger/.npm/registry.npmjs.org/ng-user-auth on PUT
39 error publish Failed PUT 403
40 verbose stack Error: You cannot publish over the previously published version 2.0.5. : ng-user-auth
40 verbose stack     at makeError (/usr/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:302:12)
40 verbose stack     at CachingRegistryClient.<anonymous> (/usr/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:290:14)
40 verbose stack     at Request._callback (/usr/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:210:14)
40 verbose stack     at Request.self.callback (/usr/lib/node_modules/npm/node_modules/request/request.js:187:22)
40 verbose stack     at emitTwo (events.js:106:13)
40 verbose stack     at Request.emit (events.js:191:7)
40 verbose stack     at Request.<anonymous> (/usr/lib/node_modules/npm/node_modules/request/request.js:1048:10)
40 verbose stack     at emitOne (events.js:96:13)
40 verbose stack     at Request.emit (events.js:188:7)
40 verbose stack     at IncomingMessage.<anonymous> (/usr/lib/node_modules/npm/node_modules/request/request.js:969:12)
41 verbose statusCode 403
42 verbose pkgid ng-user-auth
43 verbose cwd /home/ogugger/projects/ng-user-auth
44 error Linux 4.4.0-98-generic
45 error argv "/usr/bin/node" "/usr/bin/npm" "publish"
46 error node v6.11.5
47 error npm  v3.10.10
48 error code E403
49 error You cannot publish over the previously published version 2.0.5. : ng-user-auth
50 error If you need help, you may report this error at:
50 error     <https://github.com/npm/npm/issues>
51 verbose exit [ 1, true ]
